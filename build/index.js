module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("d3")},function(t,e){t.exports=require("react")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Vec=void 0;var r,o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),u=(r=i)&&r.__esModule?r:{default:r},c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=e.Vec=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s(this,t),this.x=e,this.y=n,this}return a(t,[{key:"to",value:function(t,e){return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this}},{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"sum",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"mul",value:function(t){return this.x*=t,this.y*=t,this}},{key:"sub",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"dist",value:function(t){var e=t.y-this.y,n=t.x-this.x;return Math.round(Math.pow(e*e+n*n,.5))}}]),t}();e.Graph=function(t){function e(){return s(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Component),a(e,[{key:"getId",value:function(t){return t.replace(" ","")}},{key:"addNodes",value:function(t,e){c.select(this.canvas).selectAll(".connection").remove(),c.select(this.canvas).selectAll(".node").remove();var n=c.select(this.canvas).selectAll(".connection").data(e).enter().append("g").attr("class","connection");n.append("svg:line").attr("x1",function(t){return t.InstanceNodeA.x}).attr("y1",function(t){return t.InstanceNodeA.y}).attr("x2",function(t){return t.InstanceNodeB.x}).attr("y2",function(t){return t.InstanceNodeB.y}).attr("stroke","#000000"),n.append("svg:text").text(function(t){return t.weight}).attr("dx",function(t){return t.InstanceNodeA.x+(t.InstanceNodeB.x-t.InstanceNodeA.x)/2}).attr("dy",function(t){return t.InstanceNodeA.y+(t.InstanceNodeB.y-t.InstanceNodeA.y)/2});var r=c.select(this.canvas).selectAll(".node").data(t).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).on("contextmenu",function(t){return c.event.preventDefault(),t.fixed=!t.fixed,!1}).call(c.drag().on("start",function(t,e,n){t.moving=!0}).on("drag",function(t,e,n){t.x=c.event.x,t.y=c.event.y}).on("end",function(t,e,n){delete t.moving}));return r.append("svg:text").text(function(t){return t.name}).each(function(t,e,n){t.width=n[e].getComputedTextLength()}).attr("dx",function(t){return-t.width/2}).attr("dy",10).attr("z-order",-999),r.append("svg:rect").attr("rx",6).attr("ry",6).attr("x",function(t){return-t.width/2-5}).attr("y",function(t){return-10}).attr("width",function(t){return t.width+10}).attr("height",25).attr("fill","#CCCC22").attr("stroke","#000000").each(function(t,e,n){var r=n[e].parentNode.firstChild;r&&n[e].parentNode.insertBefore(n[e],r)}),r}},{key:"sizeOf",value:function(t){var e=t.getBoundingClientRect();return new f(e.right-e.left,e.bottom-e.top)}},{key:"outBox",value:function(t){return t.x<=0||t.y<=0||t.x>=this.sizeOf(this.canvas).x||t.y>=this.sizeOf(this.canvas).y}},{key:"move",value:function(t,e){if(!t.fixed&&!t.moving){var n=new f(e.x,e.y);if(this.outBox(t)){var r=Math.atan2(this.sizeOf(this.canvas).x/2-t.y,this.sizeOf(this.canvas).y/2-t.x);n.sum((new f).to(r,5))}t.x+=Math.round(n.x),t.y+=Math.round(n.y)}}},{key:"updateNodesPositions",value:function(){}},{key:"componentDidUpdate",value:function(){var t=this,e=this.props,n=e.nodes,r=void 0===n?[]:n,a=e.connections,i=void 0===a?[]:a,u=e.scale,s=void 0===u?1:u;i=i.map(function(t){return o({},t,{InstanceNodeA:r.find(function(e){return e.name===t.nodeA}),InstanceNodeB:r.find(function(e){return e.name===t.nodeB})})}),this.addNodes(r,i),this.timer&&this.timer.stop(),this.timer=c.timer(function(e){i=i.map(function(e){var n=e.InstanceNodeA,r=e.InstanceNodeB,o=e.weight,a=new f(n.x,n.y).dist(new f(r.x,r.y)),i=new f(n.x,n.y).angleTo(r),u=o*(s/10),c=.02*Math.abs(a-u),l=(new f).to(i,c);return a>u&&(t.move(e.InstanceNodeA,l),t.move(e.InstanceNodeB,l.mul(-1))),a<u&&(t.move(e.InstanceNodeB,l),t.move(e.InstanceNodeA,l.mul(-1))),e}),c.select(t.canvas).selectAll(".node").data(r).attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}).select("rect").attr("fill",function(t){return t.fixed?"#CC2222":t.moving?"#22CC22":"#CCCC22"}),c.select(t.canvas).selectAll(".connection").data(i).selectAll("line").attr("stroke",function(t){return t.InstanceNodeA.moving||t.InstanceNodeB.moving?"#22CC22":"#000000"}).attr("stroke-width",function(t){return t.InstanceNodeA.moving||t.InstanceNodeB.moving?2:1}).attr("x1",function(t){return t.InstanceNodeA.x}).attr("y1",function(t){return t.InstanceNodeA.y}).attr("x2",function(t){return t.InstanceNodeB.x}).attr("y2",function(t){return t.InstanceNodeB.y}),c.select(t.canvas).selectAll(".connection").data(i).selectAll("text").attr("stroke",function(t){return t.InstanceNodeA.moving||t.InstanceNodeB.moving?"#22CC22":"#999999"}).attr("dx",function(t){return t.InstanceNodeA.x+(t.InstanceNodeB.x-t.InstanceNodeA.x)/2}).attr("dy",function(t){return t.InstanceNodeA.y+(t.InstanceNodeB.y-t.InstanceNodeA.y)/2})},1e3,30)}},{key:"componentWillUnmount",value:function(){this.timer.stop()}},{key:"render",value:function(){var t=this;return u.default.createElement("svg",{ref:function(e){return t.canvas=e},width:"100%",height:"100%"})}}]),e}()}]);
//# sourceMappingURL=index.js.map